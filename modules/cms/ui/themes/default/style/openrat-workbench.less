/*
OpenRat Content Management System
Copyright (C) 2002-2010 Jan Dankert

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
*/

/*
Basis-Style for Openrat.
*/


/* Usage to this variable is safe to be removed */
@color-overridden-by-theme: black;

.border-radius (@radius) {
    border-radius: @radius;
    -moz-border-radius: @radius;
    -webkit-border-radius: @radius;
    -khtml-border-radius: @radius;
}


@smartphones: ~"only screen and (max-width: 55rem)";
@wide: ~"only screen and (min-width: 75rem)";



.or {

    &-workbench {

        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;


        /*

        div.panel.modal {
        position: relative;
        z-index: 101;
        border: 1px solid !important;
        }
         */

        /* vertikale Flex-Box zwischen Header und Hauptbereich */

        > * {
        }

        &-title {
            height: 3.0rem;
            overflow: hidden;
            padding: 5px;

            .toolbar-icon {

                .arrow-down {
                    display: inline;
                }

                span.label, .arrow-down {
                    @media @smartphones {
                        display: none;
                    }
                }
            }
        }

        &-main {
            flex: 1;

            /* Horizontale Flexbox */
            //display: flex;
            //flex-direction: row;

            /*
            https://stackoverflow.com/questions/28636832/firefox-overflow-y-not-working-with-nested-flexbox
            Whenever you've got an element with overflow: [hidden|scroll|auto] inside of a flex item, you need to give its ancestor flex item min-width:0 (in a horizontal flex container) or min-height:0 (in a vertical flex container), to disable this min-sizing behavior, or else the flex item will refuse to shrink smaller than the child's min-content size.
             */
            //min-width: 0;
            min-height: 0;

            padding-top: 0.5em;

            > * {
                min-width: 0;
                min-height: 0;
                overflow-y: auto;
                overflow-x: hidden;

                height: 100%;
            }


            /*
            header {


                .or-view-icon, .or-view-headline {
                    margin: 0.3em;
                    display: inline;
                    font-size: 1.2em;
                    line-height: 1.5em;
                }

            }*/


        }


        &-workplace {

            margin-left: 33%;
            transition: margin-left 0.15s ease-in-out;

            @media @smartphones {
                margin-left: 0;
            }

            transition: opacity 0.5s ease;
            display: flex;
            flex-direction: column;

            /*
            &.is-closed {
                flex: 0.5;
                cursor: not-allowed;
                pointer-events: none;

                @media @smartphones {
                    // do not display the views in mobile mode.
                    flex: 0;
                }

                //overflow: hidden;
            }*/


        }

        &-section {
            margin: 1.5em;
            @media @smartphones {
                margin: 0.5em;
            }

            border: 1px solid;

            .border-radius(5px);


            .or-view-toolbar {
                display: inline;
            }

            // Wenn Sektion geschlossen, keine Toolbar anzeigen.
            &.or--is-closed {
                .or-view-toolbar {
                    display: none;
                }

                //.view {                        flex: 0;                    }
            }

            // Diabled Sections are not displayed.
            &.or--disabled {
                //display: none;
            }

            &.or--is-empty {
                //display: none;
            }
        }


        /* */

        &-navigation {

            width: 33%;
            transition: width 0.15s ease-in-out;
            position: fixed;
            height: ~"calc(100% - 3.0rem - 0.5em)";

            .or-act-nav-small {
                display: block;
            }

            .or-act-nav-wide {
                display: none;
            }

            &--is-small {
                width: 0;
                & ~ .or-workbench-workplace {
                    margin-left: 0;
                }

                .or-act-nav-small {
                    display: none;
                }

                .or-act-nav-wide {
                    display: block;
                }
            }

            @media @smartphones {
                width: 0;
            }

            &--is-open {

                @media @smartphones {
                    overflow-y: auto;
                    width: 95%;
                    border-right: 1px solid;
                    opacity: 0.95;
                }
            }

            @media @wide {
                overflow-y: auto;
            }


            .or-view {
                height: 100%;
            }

        }
    }


    &--visible-on-mobile {
        display: none;
        @media @smartphones {
            display: inline;
        }

    }
    &--visible-on-desktop {
        display: inline;
        @media @smartphones {
            display: none;
        }
    }

    &-toggle-nav-small {
        display: inline;
        @media @smartphones {
            display: none;
        }
    }

    &-toggle-nav-open-close {
        display: none;
        @media @smartphones {
            display: inline;
        }
    }

    &-toolbar-icon.or-search {
        //width: 8em;
        @media @smartphones {
            //width: 8em;
        }

        input {
            @media @smartphones {
                width: 3em;
            }
        }
    }


    /* Fortschrittsbalken, fuer alle Elemente verfuegbar. */
    &-loader
    {
        background: url(../images/loader.gif) no-repeat;
        background-position: center, top;
        height: 30px;
        opacity: 0.5;
        cursor: wait;
        pointer-events: none;
    }

    &-breadcrumb {
        margin-bottom: 0.1em;
        margin-left: 1.5em;
        line-height: 18px;
        font-weight: normal;
        white-space: nowrap;

        * {
            display: inline;
            margin-right: 0.3em;
        }

        &-item .or-image-icon {
            margin-right: 0.2em;
        }
    }

}






@media @smartphones {
    html {
        font-size: 1em;
    }
}

