/*
OpenRat Content Management System
Copyright (C) 2002-2010 Jan Dankert

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
*/


/* Usage to this variable is safe to be removed */
@color-overridden-by-theme: black;

.border-radius (@radius) {
    border-radius: @radius;
    -moz-border-radius: @radius;
    -webkit-border-radius: @radius;
    -khtml-border-radius: @radius;
}


@smartphones: ~"only screen and (max-width: 55rem)";
@wide: ~"only screen and (min-width: 75rem)";



.or {

    &-workbench {

        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: row;

        &-screen {
          /* Horizontale Flexbox */
          display: flex;
          flex-direction: column;
          position: relative;

          /*
          https://stackoverflow.com/questions/28636832/firefox-overflow-y-not-working-with-nested-flexbox
          Whenever you've got an element with overflow: [hidden|scroll|auto] inside of a flex item, you need to give its ancestor flex item min-width:0 (in a horizontal flex container) or min-height:0 (in a vertical flex container), to disable this min-sizing behavior, or else the flex item will refuse to shrink smaller than the child's min-content size.
           */
          //min-width: 0;
          //min-height: 0;

          //padding-top: 0.5em;

          > * {
            //min-width: 0;
            //min-height: 0;
            overflow-y: auto;
            overflow-x: hidden;

            //width: 100%;
          }


        }

        &-main {
          flex: 1;
        }

        &-title {
            height: 3.0rem;
            max-height: 3.0rem;
            min-height: 3.0rem;
            overflow: hidden;
            padding: 0.5em;
            opacity: 0.9;

            .toolbar-icon {

                .arrow-down {
                    display: inline;
                }

                span.label, .arrow-down {
                    @media @smartphones {
                        display: none;
                    }
                }
            }
        }



        &-content {
            flex: 1;
            //margin-left: 33%;
            transition: margin-left 0.15s ease-in-out;

            @media @smartphones {
                //margin-left: 0;
            }

            transition: opacity 0.5s ease;
            display: flex;
            flex-direction: column;

            /*
            &.is-closed {
                flex: 0.5;
                cursor: not-allowed;
                pointer-events: none;

                @media @smartphones {
                    // do not display the views in mobile mode.
                    flex: 0;
                }

                //overflow: hidden;
            }*/


        }

/*        &-section {
            margin: 1.5em;
            @media @smartphones {
                margin: 0.5em;
            }

            //border: 1px solid;
            //.border-radius(5px);


            .or-view-toolbar {
                display: inline;
            }

            // Wenn Sektion geschlossen, keine Toolbar anzeigen.
            &.or--is-closed {
                .or-view-toolbar {
                    display: none;
                }

            }

            // Diabled Sections are not displayed.
            &.or--disabled {
                //display: none;
            }

            &.or--is-empty {
                //display: none;
            }
        }*/


        /* */
        &--visible-on-small {
            display: none;
        }

        &--visible-on-wide {
            display: block;
        }

        &--navigation-is-small {
            .or-workbench--visible-on-wide {
                display: none;
            }

            .or-workbench--visible-on-small {
                display: block;
            }
        }

        &-navigation {


            &-container {

                width: 30em;

                //position: fixed;
                //z-index: 1;
                //opacity: 0.9;
                transition: width 0.15s ease-in-out;
                //height: 100%;
                padding:0.7em;
                overflow-x:hidden; // no horizontal scrolling

            }

            width: 30em;

          .or-navtree {
            transition: opacity 0.1s ease-in-out;
          }

          &--is-small {
                width: 0;

                //& ~ .or-workbench-workplace {
                //    margin-left: 0;
                //}

                .or-workbench-navigation-container {
                    //opacity: 0.2;
                    width: 0;
                    overflow-y: hidden;

                    .or-navtree {
                      opacity: 0.2;
                    }

                    /*
                    &:hover {
                        overflow-y: auto;
                        width: 33%;
                        opacity: 0.9;

                        .or-navtree {
                            opacity: 1;
                        }
                    }
                    */
                }

                .or-navtree {
                    opacity: 0;
                }
            }

            @media @smartphones {

                width: 0;

                .or-workbench-navigation-container {

                    /*
                    width: 0;
                    padding: 0;
                    */
                }

                &--is-open {

                  .or-workbench-navigation-container {
                    width: 100%;
                    height:100%;
                    overflow-y: auto;
                  }
                  position: fixed;
                  width: 90%;
                  z-index: 1;
                  opacity: 0.98;
                  height:100%;
                }
            }


            @media @wide {
                overflow-y: auto;
            }


            .or-view {
                height: 100%;
            }

        }
    }


    &--visible-on-mobile {
        display: none;
        @media @smartphones {
            display: inline;
        }

    }
    &--visible-on-desktop {
        //display: inline;
        @media @smartphones {
            display: none;
        }
    }

    &-toggle-nav-small {
        display: inline;
        @media @smartphones {
            display: none;
        }
    }

    &-toggle-nav-open-close {
        display: none;
        @media @smartphones {
            display: inline;
        }
    }

    &-toolbar-icon.or-search {
        //width: 8em;
        @media @smartphones {
            //width: 8em;
        }

        input {
            @media @smartphones {
                //width: 3em;
            }
        }
    }


    /* Fortschrittsbalken, fuer alle Elemente verfuegbar. */
    &-loader
    {
        background: url(../images/loader.gif) no-repeat;
        background-position: center, top;
        height: 30px;
        opacity: 0.5;
        cursor: wait;
        pointer-events: none;
    }



}






@media @smartphones {
    html {
        font-size: 1em;
    }
}

